{"ast":null,"code":"import { configApi } from './utils';\nclass Api {\n  constructor({\n    BASE_URL,\n    headers\n  }) {\n    this.baseUrl = BASE_URL;\n    this.headers = headers;\n  }\n  _checkAnswer(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n  _request(url, options) {\n    return fetch(`${this.baseUrl}${url}`, options).then(this._checkAnswer);\n  }\n  getUserInfo() {\n    return this._request('/users/me', {\n      headers: this.headers\n    });\n  }\n  setUserInfo({\n    name,\n    about\n  }) {\n    return this._request('/users/me', {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    });\n  }\n  getInitialCards() {\n    const token = localStorage.getItem;\n    return this._request('/cards', {\n      headers: this.headers\n    });\n  }\n  addCard({\n    name,\n    link\n  }) {\n    return this._request('/cards', {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    });\n  }\n  _addLikeCard(id) {\n    return this._request(`/cards/${id}/likes`, {\n      method: 'PUT',\n      headers: this.headers\n    });\n  }\n  _deleteLikeCard(id) {\n    return this._request(`/cards/${id}/likes`, {\n      method: 'DELETE',\n      headers: this.headers\n    });\n  }\n  toggleLikeCard(cardId, isLiked) {\n    if (isLiked) {\n      return this._deleteLikeCard(cardId);\n    } else {\n      return this._addLikeCard(cardId);\n    }\n  }\n  deleteCard(cardId) {\n    return this._request(`/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this.headers\n    });\n  }\n  updateAvatar({\n    avatar\n  }) {\n    return this._request('/users/me/avatar', {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: avatar\n      })\n    });\n  }\n}\nconst api = new Api(configApi);\nexport default api;","map":{"version":3,"names":["configApi","Api","constructor","BASE_URL","headers","baseUrl","_checkAnswer","res","ok","json","Promise","reject","status","_request","url","options","fetch","then","getUserInfo","setUserInfo","name","about","method","body","JSON","stringify","getInitialCards","token","localStorage","getItem","addCard","link","_addLikeCard","id","_deleteLikeCard","toggleLikeCard","cardId","isLiked","deleteCard","updateAvatar","avatar","api"],"sources":["C:/Users/Тимофей/dev/react-mesto-api-full-gha/frontend/src/utils/api.js"],"sourcesContent":["import { configApi } from './utils';\r\n\r\nclass Api {\r\n  constructor({ BASE_URL, headers }) {\r\n    this.baseUrl = BASE_URL;\r\n    this.headers = headers;\r\n  }\r\n\r\n  _checkAnswer(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  _request(url, options) {\r\n    return fetch(`${this.baseUrl}${url}`, options).then(this._checkAnswer);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return this._request('/users/me', {\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  setUserInfo({ name, about }) {\r\n    return this._request('/users/me', {\r\n      method: 'PATCH',\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about,\r\n      }),\r\n    });\r\n  }\r\n\r\n  getInitialCards() {\r\n    const token = localStorage.getItem\r\n    return this._request('/cards', {\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  addCard({ name, link }) {\r\n    return this._request('/cards', {\r\n      method: 'POST',\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link,\r\n      }),\r\n    });\r\n  }\r\n\r\n  _addLikeCard(id) {\r\n    return this._request(`/cards/${id}/likes`, {\r\n      method: 'PUT',\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  _deleteLikeCard(id) {\r\n    return this._request(`/cards/${id}/likes`, {\r\n      method: 'DELETE',\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  toggleLikeCard(cardId, isLiked) {\r\n    if (isLiked) {\r\n      return this._deleteLikeCard(cardId);\r\n    } else {\r\n      return this._addLikeCard(cardId);\r\n    }\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return this._request(`/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  updateAvatar({ avatar }) {\r\n    return this._request('/users/me/avatar', {\r\n      method: 'PATCH',\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        avatar: avatar,\r\n      }),\r\n    });\r\n  }\r\n}\r\n\r\nconst api = new Api(configApi);\r\n\r\nexport default api;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}