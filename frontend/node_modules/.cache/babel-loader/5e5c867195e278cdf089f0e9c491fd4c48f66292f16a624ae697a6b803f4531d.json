{"ast":null,"code":"import { configApi } from './utils';\nclass Api {\n  constructor({\n    BASE_URL,\n    HEADER\n  }) {\n    this.baseUrl = BASE_URL;\n    this.header = HEADER;\n  }\n  _checkAnswer(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n  _request(url, options) {\n    return fetch(`${this.baseUrl}${url}`, options).then(this._checkAnswer);\n  }\n  getUserInfo() {\n    return this._request('/users/me', {\n      headers: this.header\n    });\n  }\n  setUserInfo({\n    name,\n    about\n  }) {\n    return this._request('/users/me', {\n      method: 'PATCH',\n      headers: this.header,\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    });\n  }\n  getInitialCards() {\n    const token = localStorage.getItem('jwt');\n    return this._request('/cards', {\n      headers: this.headers,\n      authorization: token\n    });\n  }\n  addCard({\n    name,\n    link\n  }) {\n    const token = localStorage.getItem('jwt');\n    return this._request('/cards', {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    });\n  }\n  _addLikeCard(id) {\n    return this._request(`/cards/${id}/likes`, {\n      method: 'PUT',\n      headers: this.headers\n    });\n  }\n  _deleteLikeCard(id) {\n    return this._request(`/cards/${id}/likes`, {\n      method: 'DELETE',\n      headers: this.headers\n    });\n  }\n  toggleLikeCard(cardId, isLiked) {\n    if (isLiked) {\n      return this._deleteLikeCard(cardId);\n    } else {\n      return this._addLikeCard(cardId);\n    }\n  }\n  deleteCard(cardId) {\n    return this._request(`/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this.headers\n    });\n  }\n  updateAvatar({\n    avatar\n  }) {\n    return this._request('/users/me/avatar', {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: avatar\n      })\n    });\n  }\n}\nconst api = new Api(configApi);\nexport default api;","map":{"version":3,"names":["configApi","Api","constructor","BASE_URL","HEADER","baseUrl","header","_checkAnswer","res","ok","json","Promise","reject","status","_request","url","options","fetch","then","getUserInfo","headers","setUserInfo","name","about","method","body","JSON","stringify","getInitialCards","token","localStorage","getItem","authorization","addCard","link","_addLikeCard","id","_deleteLikeCard","toggleLikeCard","cardId","isLiked","deleteCard","updateAvatar","avatar","api"],"sources":["C:/Users/Тимофей/dev/react-mesto-api-full-gha/frontend/src/utils/api.js"],"sourcesContent":["import { configApi } from './utils';\r\n\r\nclass Api {\r\n  constructor({ BASE_URL, HEADER }) {\r\n    this.baseUrl = BASE_URL;\r\n    this.header = HEADER;\r\n  }\r\n\r\n  _checkAnswer(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  _request(url, options) {\r\n    return fetch(`${this.baseUrl}${url}`, options).then(this._checkAnswer);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return this._request('/users/me', {\r\n      headers: this.header ,\r\n    });\r\n  }\r\n\r\n  setUserInfo({ name, about }) {\r\n    return this._request('/users/me', {\r\n      method: 'PATCH',\r\n      headers: this.header,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about,\r\n      }),\r\n    });\r\n  }\r\n\r\n  getInitialCards() {\r\n    const token = localStorage.getItem('jwt');\r\n\r\n    return this._request('/cards', {\r\n      headers: this.headers,\r\n      authorization: token\r\n    });\r\n  }\r\n\r\n  addCard({ name, link }) {\r\n    const token = localStorage.getItem('jwt');\r\n    \r\n    return this._request('/cards', {\r\n      method: 'POST',\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link,\r\n      }),\r\n    });\r\n  }\r\n\r\n  _addLikeCard(id) {\r\n    return this._request(`/cards/${id}/likes`, {\r\n      method: 'PUT',\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  _deleteLikeCard(id) {\r\n    return this._request(`/cards/${id}/likes`, {\r\n      method: 'DELETE',\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  toggleLikeCard(cardId, isLiked) {\r\n    if (isLiked) {\r\n      return this._deleteLikeCard(cardId);\r\n    } else {\r\n      return this._addLikeCard(cardId);\r\n    }\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return this._request(`/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  updateAvatar({ avatar }) {\r\n    return this._request('/users/me/avatar', {\r\n      method: 'PATCH',\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        avatar: avatar,\r\n      }),\r\n    });\r\n  }\r\n}\r\n\r\nconst api = new Api(configApi);\r\n\r\nexport default api;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}